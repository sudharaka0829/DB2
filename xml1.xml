2. Create Item Prototypes:
After creating the discovery rule, click on Item prototypes tab within the discovery rule configuration.
Click on Create item prototype.
For TotalHits:
Name: Enter a name for the item prototype, e.g., "Bufferpool TotalHit".
Key: Enter a key for the item prototype, e.g., "bufferpool.totalhit[{#BUFFERPOOL}]".
Type: Select the appropriate type based on the data you want to collect (e.g., "Numeric (float)" for TotalHit).
Key parameters: Enter {#BUFFERPOOL} as the key parameter.
Type of information: Select the appropriate type based on the data you want to collect (e.g., "Numeric (float)" for TotalHit).
Data type: Select the appropriate data type.
Update interval (in sec): Set the update interval according to your requirement.
For IdxHits:
Name: Enter a name for the item prototype, e.g., "Bufferpool IdxHit".
Key: Enter a key for the item prototype, e.g., "bufferpool.idxhit[{#BUFFERPOOL}]".
Type: Select the appropriate type based on the data you want to collect (e.g., "Numeric (float)" for IdxHit).
Key parameters: Enter {#BUFFERPOOL} as the key parameter.
Type of information: Select the appropriate type based on the data you want to collect (e.g., "Numeric (float)" for IdxHit).
Data type: Select the appropriate data type.
Update interval (in sec): Set the update interval according to your requirement.
Save the item prototypes.
3. Apply Changes:
After creating the discovery rule and item prototypes, ensure to link the discovery rule to the appropriate host(s) in the "Discovery" tab of the host configuration. Finally, click on Update to apply the changes.

With these configurations, Zabbix will automatically discover the buffer pools based on the data obtained from the bufferpool.stats user parameter, and it will create item instances for each discovered buffer pool with the corresponding TotalHit and IdxHit data.











{"data":[
{"{#BUFFERPOOL}":"IBMDEFAULTBP","TotalHit":"99.97","IdxHit":"99.81"}
,
{"{#BUFFERPOOL}":"BUFFERPOOL16K","TotalHit":"99.92","IdxHit":"99.77"}
,
{"{#BUFFERPOOL}":"BUFFERPOOL8K","TotalHit":"-","IdxHit":"-"}
,
{"{#BUFFERPOOL}":"BUFFERPOOL32K","TotalHit":"-","IdxHit":"-"}
,
{"{#BUFFERPOOL}":"MYDB_32K","TotalHit":"100.00","IdxHit":"100.00"}
]}
